<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        #colorList {
            margin-top: 20px;
        }

        .colorBox {
            display: inline-block;
            width: 50px;
            height: 50px;
            margin: 5px;
            border: 1px solid #000;
        }

        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Color Palette</h1>
    
    <form id="colorForm">
        <label for="colorName">Color Name:</label>
        <input type="text" id="colorName" required>

        <label for="colorType">Color Type:</label>
        <select id="colorType" required>
            <option value="RGB">RGB</option>
            <option value="RGBA">RGBA</option>
            <option value="HEX">HEX</option>
        </select>

        <label for="colorCode">Color Code:</label>
        <input type="text" id="colorCode" required>

        <button type="button" onclick="saveColor()">Save</button>
    </form>

    <div id="colorList"></div>

    <script>
        function saveColor() {
            const colorName = document.getElementById("colorName").value.trim().toLowerCase();
            const colorType = document.getElementById("colorType").value;
            const colorCode = document.getElementById("colorCode").value.trim();

            if (!isValidColorName(colorName) || !isValidColorCode(colorType, colorCode)) {
                alert("Invalid input. Please check the form and try again.");
                return;
            }

            const existingColors = getSavedColors();
            if (existingColors.includes(colorName)) {
                alert("Color with the same name already exists. Please choose a different name.");
                return;
            }

            existingColors.push(colorName);
            setCookie("colors", JSON.stringify(existingColors), 3);

            displayColor(colorName, colorType, colorCode);
        }

        function isValidColorName(name) {
            const nameRegex = /^[a-zA-Z]+$/;
            return nameRegex.test(name);
        }

        function isValidColorCode(type, code) {
            if (type === "RGB") {
                const rgbRegex = /^(\d{1,3},\s*\d{1,3},\s*\d{1,3})$/;
                return rgbRegex.test(code);
            } else if (type === "RGBA") {
                const rgbaRegex = /^(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*0(\.\d{1,2})?|1(\.0)?)$/;
                return rgbaRegex.test(code);
            } else if (type === "HEX") {
                const hexRegex = /^#[0-9a-fA-F]{6}$/;
                return hexRegex.test(code);
            }
            return false;
        }

        function getSavedColors() {
            const colorsCookie = getCookie("colors");
            return colorsCookie ? JSON.parse(colorsCookie) : [];
        }

        function setCookie(name, value, hours) {
            const expirationDate = new Date();
            expirationDate.setTime(expirationDate.getTime() + (hours * 60 * 60 * 1000));
            document.cookie = name + "=" + value + "; expires=" + expirationDate.toUTCString() + "; path=/";
        }

        function getCookie(name) {
            const cookieName = name + "=";
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.indexOf(cookieName) === 0) {
                    return cookie.substring(cookieName.length, cookie.length);
                }
            }
            return "";
        }

        function displayColor(name, type, code) {
            const colorList = document.getElementById("colorList");
            const colorBox = document.createElement("div");
            colorBox.className = "colorBox";
            colorBox.style.backgroundColor = (type === "HEX") ? code : "rgba(" + code + ")";
            colorList.appendChild(colorBox);
        }
    </script>
</body>
</html>
